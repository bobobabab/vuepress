---
title: 图片处理规范
sidebar: auto
---

# 图片处理

本文将介绍图片的优化、以及一些处理图片的方式

## 图片优化
>  所有的图片必须使用[压缩工具](https://tinypng.com/)或者采用[自动化压缩图片方案]()压缩后使用，不可直接使用
1. 图片体积不可以超过300K
2. 上线的图片都应该经过压缩处理，压缩后的图片不应该出现肉眼可感知的失真区域
3. JPG图片必须压缩，一般80%品质即可，保证文字清晰
4. JPG图片可以使用渐进式图片：使用PS的“存储为web所用格式”时候，勾选“连续”（可以配合UI操作）🌟
5. 装饰性图片合并成精灵图，减少页面请求或者采取svg的方式
6. 可以采用懒加载的方式，只加载出现在视图内的图片
7. PC平台单张的图片的大小不应大于 200KB
8. 移动平台单张的图片的大小不应大于 100KB。


## 图片标签

1. PC端img图片必须包含 `width`、`height`、`alt` 属性
2. 移动端必须写 `alt` 属性
3. alt不能是没有意义的字符，需要能表现出图片的含义（如果图片是个书本，那么应该是书本的名称）
4. CSS中引入图片不需要用引号

```css
.element {
  background-image: url(icon.png);
}
```

## 图片名称
用间断有意义的英文或者拼音（不可以中文）来命名。 

第一个单词首字母小写，之后每个单词首字母大写，或者全部小写，单词间用下划线连接。例如(btn_sign.gif， bgTipBox.png)。  

这里推荐采用全部小写，单词间用下划线连接

## 图片格式

常见图片格式有 GIF、PNG8、PNG24、JPEG、WEBP、SVG等。

### GIF

* 优秀的压缩算法使其在一定程度上保证图像质量的同时将体积变得很小。
* 可插入多帧，从而实现动画效果。
* 可设置透明色以产生对象浮现于背景之上的效果。
* 由于采用了8位压缩，最多只能处理256种颜色，故不宜应用于真彩色图片

### PNG

> 关键点: 无损压缩、质量高、体积大、支持透明

* 优点
  * 支持256色调色板技术
  * 无损压缩
  * 最高支持48位真彩色图像以及16位灰度图像。
  * 支持Alpha通道的透明/半透明特性。
* 缺点
  * 体积大
* 应用场景
  * 处理线条和颜色对比度方面的优势

### JPEG

> 关键点：有损压缩、体积小、加载快、不支持透明

* 优点：有损压缩，可以保住图片的质量，减少体积
* 缺点
  * 处理矢量图形和 Logo 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显
  * JPEG 图像不支持透明度处理，透明图片需要召唤 PNG 来呈现
* 应用场景
  * 轮播图、大图

### SVG

> 关键点：文本文件、体积小、不失真、兼容性好

* 优点
  * 体积小，尺寸更小，且可压缩性更强
  * 可伸缩的，任何分辨率都可以高质量打印
  * 可以和JS一起运行
* 缺点
  * 渲染成本相对其他图片格式较高，对性能略有影响
* 应用场景
  * 插入在线矢量图形

### WEBP

* 同时提供有损压缩和无损压缩两种图片文件格式
* 文件体积小，无损压缩后，比 PNG 文件少了 45％ 的文件大小；有损压缩后，比 JPEG 文件少了 25% - 34% 文件大小
* 浏览器兼容差，目前只支持客户端 Chrome 和 Opera 浏览器以及安卓原生浏览器(Andriod 4.0+)

### 内容图
内容图一般都是照片类的图片，颜色都是比较丰富的，体积也是比较大的

* 优先考虑JPEG格式、条件允许的话可以采用WebP格式
* 尽量不用PNG格式，毕竟PNG8色位太低、PNG24压缩率低，体积也大

### 背景图

背景图一般就是图片等颜色比较简单、体积又不是很大，装饰作用的图片

* PNG和GIF 格式，优先考虑PNG，毕竟PNG格式允许更多颜色并可以提供更好的压缩率
* 图像颜色比较简单的，可以优先考虑PNG8格式，避免JPEG格式
* 图片颜色丰富而且图片体积不大（40KB以下）或者有半透明效果的优先考虑PNG24格式
* 图像颜色丰富而且体积大的（40KB-200KB）优先考虑JPEG格式
* 如果条件都允许的话，那么优先考虑WebP代替PNG和JEPG格式

## 雪碧图和BASE64编码

### 雪碧图特点

* 减少请求数
* 加速图片的显示
* 维护更新成本大
* 更多的内存消耗，特别是大体积或有过多空白的雪碧图
* 图片渗漏，相邻的不需展示的图片有可能出现在展示元素中，特别是在高清设备移动设备上

### 雪碧图使用建议

* 适合使用频率高更新频率低的小图标
* 尽量不留太多的空白
* 体积较大的图片不合并
* 确保要合并的小图坐标数值和合并后的雪碧图图尺寸均为偶数

> 当然更推荐使用svg毕竟对于绝大部分图案、图标等、矢量图更小，可缩放还不用生成多套，并且主流浏览器都支持svg了。

### BASE64图片特点

* 减少请求数
* 转换文件体积大，大约比原始的二进制大33%
* IE6 / IE7 不支持
* 图片显示相对较慢，需要更多的CPU消耗

### BASE64使用建议

* 适合更新频率高的小图片，如某些具备自定义功能的标题icon等
* 转换成 Base64 编码的图片应小于 2KB
* 移动端不使用 Base64 编码
* 要兼容 IE6/IE7 的不使用
